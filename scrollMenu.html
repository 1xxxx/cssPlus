<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>cssPlus</title>


    <link rel="stylesheet" href="css/build/cssPlus-v.0.2-build.css">

    <link rel="stylesheet" href="css/source/scrollMenu.css">
    <link rel="stylesheet" href="js/jquery.snippet.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="js/underscore.js"></script>
    <script src="js/jquery.snippet.js"></script>
    <script src="js/scrollTo.js"></script>

</head>
<body>

<div class="EXTENDER bb">
    <div class="COLS">
        <div class="CELL _200px ROWS JUS-CENTER scrollMenu-menu">




        </div>
        <div class="CELL _FLEX">
            <div class="EXTENDER">
                <div class="PADDER0">
                    <div class="SCROLLABLE scrollMenu-scrollable">

                        <a class="paragraph-a" id="menu0">
                            <h3 class="paragraph-title">Extender</h3>

                            <div class="cssPlusSnippet">

                                <pre class="htmlCode" style="width: 95%; margin: 0px auto">
                                    <code>


                                        <div class="EXTENDER" style="background-color: rgba(0,150,255,0.2)">
                                            <div class="COLS JUS-CENTER">
                                                <div class="CELL CENTER">
                                                    we
                                                </div>
                                                <div class="CELL CENTER">
                                                    we
                                                </div>
                                                <div class="CELL CENTER">
                                                    we
                                                </div>
                                            </div>
                                        </div>
                                    </code>
                                </pre>
                            </div>
                        </a>



                        <a class="paragraph-a" id="menu1">
                            <h3 class="paragraph-title">ROWS</h3>

                            <div class="cssPlusSnippet">

                                <pre class="htmlCode" style="width: 95%; margin: 0px auto">
                <code>
                    <div class="EXTENDER">
                        <div class="PADDER25">
                            <div class="COLS">
                                <div class="CELL _50px" style="background-color: rgba(0,0,0,.3)">header</div>
                                <div class="CELL _FLEX">body</div>
                                <div class="CELL _30px" style="background-color: rgba(0,0,0,.3)">footer</div>
                            </div>
                        </div>
                    </div>
                </code>
            </pre>
                            </div>
                        </a>


                        <a class="paragraph-a" id="menu2">
                            <h3 class="paragraph-title">COLS</h3>

                            <div class="cssPlusSnippet">

                                <pre class="htmlCode" style="width: 95%; margin: 0px auto">
                                    <code>


                                        <div class="EXTENDER" style="background-color: rgba(0,150,255,0.2)">
                                            <div class="COLS JUS-CENTER">
                                                <div class="CELL _40px CENTER">
                                                    we
                                                </div>
                                                <div class="CELL _40px CENTER">
                                                    we
                                                </div>
                                                <div class="CELL _40px CENTER">
                                                    we
                                                </div>
                                            </div>
                                        </div>
                                    </code>
                                </pre>
                            </div>
                        </a>







                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>

    $(document).ready(function(){







        function escapeHTML(string) {
            var pre = document.createElement('pre');
            var text = document.createTextNode(string);
            pre.appendChild(text);
            return pre.innerHTML;
        }


        $("pre.htmlCode").each(function () {
            var code = $(this).find("code").html();
            var $code = $(this).find("code");
            var escaped = escapeHTML(code);

            //alert(escaped);

            $code.html(escaped);
            $(this).snippet("html", {style: "darkblue"});
            $(this).find("li").each(function () {
                if ($(this).find("code").html() == "" || $(this).find("code").text() == "")
                    $(this).remove();
            });

            $(this).parents(".cssPlusSnippet").append("<div class='example_constrictor'><div class='handler ui-resizable-handle ui-resizable-se'></div>"+code+"</div>");
        });


        var timeout;
        $('.example_constrictor').resizable({
            handles: {
                'se': '.handler'
            },
            minHeight: 180,
            minWidth: 370,
            start: function () {
                clearTimeout(timeout);
            },
            stop: function (event, ui) {
                timeout = setTimeout(function () {
                    $('.example_constrictor').animate({
                        "width": "500px",
                        "height": "300px"
                    }, {duration: 1500, easing: 'easeOutBounce'})
                }, 1);
            }
        });












        var offsets = [];

        $("h3").each(function(){
            offsets.push($(this).offset().top);
        });






        $(".scrollMenu-scrollable").find(".paragraph-a").each(function(index){
            var id = $(this).attr("id");
            var title = $(this).find(".paragraph-title").html();
            var active = (index == 0)? "active" : "";
            var menuItemHtml = "<div class='CELL "+active+"'><a href='#"+id+"'>"+title+"</a></div>";
            $(".scrollMenu-menu").append(menuItemHtml);
        });






        $(".scrollMenu-menu").find("a").click(function(e){
            var href = $(this).attr("href");

            $(".scrollMenu-scrollable").scrollTo(href,{duration:'slow', offsetTop : '50'});
            e.preventDefault();
        });




        $(".scrollMenu-scrollable").scroll(function(){
            // Get container scroll position
            var fromTop = $(this).scrollTop() + 150;

            for(var i=0; i<offsets.length; i++){
                if(fromTop < offsets[0])
                    activeMenu(0);
                else{
                    if(fromTop > offsets[offsets.length-1])
                        activeMenu(offsets.length-1);
                    else{
                        if(fromTop >= offsets[i] && fromTop < offsets[i+1])
                            activeMenu(i)
                    }
                }
            }

            function activeMenu(i){
                $(".scrollMenu-menu .CELL").removeClass("active");
                $(".scrollMenu-menu .CELL").eq(i).addClass("active");
            }

        });


        /*




        */




    });
</script>




</body>


</html>


